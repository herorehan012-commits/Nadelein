<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - Nadeleine Pharma</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            background: #f9f9f9;
        }

        .header-top {
            background: #fff;
            padding: 1rem 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #0066cc;
            cursor: pointer;
        }

        .header-actions {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .header-actions button {
            text-decoration: none;
            color: #333;
            font-size: 0.9rem;
            transition: color 0.3s;
            background: none;
            border: none;
            cursor: pointer;
            position: relative;
        }

        .header-actions button:hover {
            color: #0066cc;
        }

        .badge {
            background: #ff6b35;
            color: white;
            border-radius: 50%;
            padding: 0.2rem 0.5rem;
            font-size: 0.75rem;
            font-weight: bold;
            position: absolute;
            top: -8px;
            right: -8px;
        }

        .user-menu {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            background: white;
            min-width: 180px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 4px;
            top: 100%;
            right: 0;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-menu a, .dropdown-menu button {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            border: none;
            background: none;
            cursor: pointer;
            text-align: left;
            width: 100%;
        }

        .dropdown-menu a:hover, .dropdown-menu button:hover {
            background-color: #f5f5f5;
            color: #0066cc;
        }

        .logout-btn {
            color: #ff6b35 !important;
        }

        .main-nav {
            background: #f5f5f5;
            border-bottom: 1px solid #e0e0e0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            gap: 2rem;
        }

        .nav-container a {
            padding: 1rem 0;
            text-decoration: none;
            color: #333;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .nav-container a:hover {
            color: #0066cc;
            border-bottom-color: #0066cc;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            overflow: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            color: #0066cc;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .submit-btn {
            width: 100%;
            background: #0066cc;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 1rem;
        }

        .switch-link {
            text-align: center;
            margin-top: 1rem;
            color: #666;
        }

        .switch-link a {
            color: #0066cc;
            text-decoration: none;
            cursor: pointer;
        }

        .cart-sidebar {
            position: fixed;
            right: -400px;
            top: 0;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 8px rgba(0,0,0,0.2);
            z-index: 999;
            transition: right 0.3s;
            overflow-y: auto;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .sidebar-header {
            background: #0066cc;
            color: white;
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-items {
            padding: 1.5rem;
            min-height: 300px;
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            background: #f5f5f5;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-info h4 {
            margin-bottom: 0.5rem;
            color: #333;
            font-size: 0.9rem;
        }

        .cart-item-price {
            color: #0066cc;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .remove-btn {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 0.3rem;
            width: fit-content;
        }

        .qty-btn {
            background: #f5f5f5;
            border: none;
            width: 28px;
            height: 28px;
            cursor: pointer;
            border-radius: 3px;
            font-weight: bold;
            color: #333;
        }

        .qty-btn:hover {
            background: #e0e0e0;
        }

        .qty-input {
            width: 40px;
            border: none;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 2px solid #e0e0e0;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-weight: bold;
            color: #0066cc;
        }

        .checkout-btn {
            width: 100%;
            background: #0066cc;
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Checkout Page */
        .checkout-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .checkout-page.active {
            display: block;
        }

        .checkout-container {
            background: white;
            max-width: 1000px;
            margin: 2rem auto;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .checkout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 1rem;
        }

        .checkout-header h1 {
            color: #0066cc;
            font-size: 1.8rem;
        }

        .checkout-header button {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
        }

        .checkout-content {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 2rem;
        }

        .checkout-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-section {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .form-section h2 {
            color: #0066cc;
            font-size: 1.1rem;
            border-bottom: 1px solid #e0e0e0;
            padding-bottom: 0.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-group input, .form-group select {
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 0.95rem;
            font-family: inherit;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #0066cc;
            box-shadow: 0 0 5px rgba(0, 102, 204, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .checkout-summary {
            background: #f9f9f9;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .summary-header {
            color: #0066cc;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            border-bottom: 2px solid #0066cc;
            padding-bottom: 0.5rem;
        }

        .summary-items {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 1rem;
            max-height: 300px;
            overflow-y: auto;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-item-name {
            flex: 1;
        }

        .summary-item-price {
            color: #0066cc;
            font-weight: 600;
        }

        .summary-divider {
            border-top: 2px solid #ddd;
            margin: 1rem 0;
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
            font-weight: bold;
            color: #0066cc;
            margin-bottom: 1.5rem;
        }

        .checkout-buttons {
            display: flex;
            gap: 1rem;
            flex-direction: column;
        }

        .place-order-btn {
            background: #0066cc;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .place-order-btn:hover {
            background: #0052a3;
        }

        .cancel-checkout-btn {
            background: #f5f5f5;
            color: #333;
            border: 1px solid #ddd;
            padding: 1rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .cancel-checkout-btn:hover {
            background: #e0e0e0;
        }

        /* Payment Page */
        .payment-page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            overflow-y: auto;
        }

        .payment-page.active {
            display: block;
        }

        .payment-container {
            background: white;
            max-width: 600px;
            margin: 2rem auto;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 1rem;
        }

        .payment-header h1 {
            color: #0066cc;
            font-size: 1.6rem;
        }

        .payment-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .payment-tab {
            flex: 1;
            padding: 0.8rem;
            border: 2px solid #ddd;
            background: #f9f9f9;
            cursor: pointer;
            border-radius: 4px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
        }

        .payment-tab.active {
            border-color: #0066cc;
            background: #e6f0ff;
            color: #0066cc;
        }

        .payment-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .payment-summary {
            background: #f0f8ff;
            padding: 1rem;
            border-radius: 4px;
            border-left: 4px solid #0066cc;
            margin-bottom: 1rem;
        }

        .payment-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .payment-summary-row:last-child {
            margin-bottom: 0;
            border-top: 1px solid #ddd;
            padding-top: 0.5rem;
            font-weight: bold;
            color: #0066cc;
            font-size: 1rem;
        }

        .card-row {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1rem;
        }

        .pay-button {
            background: #0066cc;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .pay-button:hover {
            background: #0052a3;
        }

        .empty-message {
            text-align: center;
            color: #999;
            padding: 2rem;
        }

        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .breadcrumb {
            color: #999;
            font-size: 0.9rem;
            margin-bottom: 2rem;
        }

        .breadcrumb a {
            color: #0066cc;
            text-decoration: none;
        }

        .product-detail {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .product-image-container {
            background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
            border-radius: 8px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8rem;
            color: white;
        }

        .product-info-section {
            padding: 1rem 0;
        }

        .product-name {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 1rem;
        }

        .rating {
            color: #ffc107;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .price-section {
            margin: 2rem 0;
            padding: 1.5rem 0;
            border-top: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
        }

        .price {
            font-size: 2rem;
            color: #0066cc;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .shipping-info {
            color: #ff6b35;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .stock-status {
            background: #e8f5e9;
            color: #2e7d32;
            padding: 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .product-specs {
            margin: 1.5rem 0;
        }

        .product-specs h3 {
            color: #0066cc;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .specs-list {
            list-style: none;
            padding-left: 0;
        }

        .specs-list li {
            padding: 0.5rem 0;
            color: #666;
            border-bottom: 1px solid #f0f0f0;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin: 2rem 0;
        }

        .add-to-cart-btn {
            flex: 1;
            background: #0066cc;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
        }

        .add-to-cart-btn:hover {
            background: #0052a3;
        }

        .wishlist-btn {
            background: white;
            border: 2px solid #ff6b35;
            color: #ff6b35;
            padding: 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
        }

        .wishlist-btn.active {
            background: #ff6b35;
            color: white;
        }

        .why-choose {
            background: #f5f5f5;
            padding: 1.5rem;
            border-radius: 4px;
            margin: 2rem 0;
        }

        .why-choose h3 {
            color: #0066cc;
            margin-bottom: 1rem;
        }

        .benefits-list {
            list-style: none;
            padding-left: 0;
        }

        .benefits-list li {
            padding: 0.5rem 0;
            color: #666;
        }

        .benefits-list li:before {
            content: "‚úì ";
            color: #0066cc;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .description-section {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 3rem;
        }

        .description-section h2 {
            color: #0066cc;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .description-section p {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .related-products {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 3rem;
        }

        .related-products h2 {
            color: #0066cc;
            margin-bottom: 2rem;
            font-size: 1.5rem;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .related-card {
            background: #f9f9f9;
            padding: 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #e0e0e0;
        }

        .related-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-3px);
        }

        .related-card-image {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .related-card-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
            font-size: 0.9rem;
        }

        .related-card-price {
            color: #0066cc;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        footer {
            background: #1a1a1a;
            color: white;
            padding: 3rem 2rem;
            text-align: center;
            margin-top: 3rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: #ffeb3b;
            text-decoration: none;
        }

        @media (max-width: 768px) {
            .product-detail {
                grid-template-columns: 1fr;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header-top">
        <div class="header-content">
            <div class="logo" onclick="window.location.href='index.html'">Nadeleine</div>
            <div class="header-actions">
                <div class="user-menu">
                    <button onclick="toggleUserMenu()">üë§ Account</button>
                    <div class="dropdown-menu" id="userMenu">
                        <span id="userDisplay" style="padding: 12px 16px; display: block; color: #999;"></span>
                        <a href="#" onclick="goToLogin(event)">Login</a>
                        <a href="#" onclick="goToRegister(event)">Register</a>
                        <button class="logout-btn" onclick="logout()" id="logoutBtn" style="display:none;">Logout</button>
                    </div>
                </div>
                <button onclick="toggleWishlist()">‚ù§Ô∏è Wishlist<span class="badge" id="wishlistCount" style="display:none;">0</span></button>
                <button onclick="toggleCart()">üõí Cart<span class="badge" id="cartCount" style="display:none;">0</span></button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="index.html">Home</a>
            <a href="shop.html">Shop</a>
            <a href="#about">About Us</a>
            <a href="#contact">Contact Us</a>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login</h2>
                <button class="close-btn" onclick="closeLoginModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="loginEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="loginPassword" placeholder="Enter your password">
            </div>
            <button class="submit-btn" onclick="handleLogin()">Login</button>
            <div class="switch-link">
                Don't have an account? <a onclick="switchToRegister(event)">Register here</a>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Register</h2>
                <button class="close-btn" onclick="closeRegisterModal()">&times;</button>
            </div>
            <div class="form-group">
                <label>Full Name</label>
                <input type="text" id="registerName" placeholder="Enter your full name">
            </div>
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="registerEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label>Password</label>
                <input type="password" id="registerPassword" placeholder="Enter your password">
            </div>
            <div class="form-group">
                <label>Phone</label>
                <input type="tel" id="registerPhone" placeholder="Enter your phone number">
            </div>
            <button class="submit-btn" onclick="handleRegister()">Register</button>
            <div class="switch-link">
                Already have an account? <a onclick="switchToLogin(event)">Login here</a>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="sidebar-header">
            <h3>Shopping Cart</h3>
            <button class="close-btn" onclick="toggleCart()">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-message">Your cart is empty</div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">‚Çπ0.00</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Wishlist Sidebar -->
    <div class="cart-sidebar" id="wishlistSidebar">
        <div class="sidebar-header">
            <h3>My Wishlist</h3>
            <button class="close-btn" onclick="toggleWishlist()">&times;</button>
        </div>
        <div class="cart-items" id="wishlistItems">
            <div class="empty-message">Your wishlist is empty</div>
        </div>
    </div>

    <!-- Checkout Page -->
    <div class="checkout-page" id="checkoutPage">
        <div class="checkout-container">
            <div class="checkout-header">
                <h1>Checkout</h1>
                <button onclick="closeCheckout()">&times;</button>
            </div>
            <div class="checkout-content">
                <div class="checkout-form">
                    <!-- Delivery Address -->
                    <div class="form-section">
                        <h2>Delivery Address</h2>
                        <div class="form-group">
                            <label>Full Name</label>
                            <input type="text" id="fullName" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label>Email Address</label>
                            <input type="email" id="emailAddr" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="phoneNum" placeholder="Enter your phone number" required>
                        </div>
                        <div class="form-group">
                            <label>Street Address</label>
                            <input type="text" id="street" placeholder="Enter street address" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>City</label>
                                <input type="text" id="city" placeholder="City" required>
                            </div>
                            <div class="form-group">
                                <label>State</label>
                                <input type="text" id="state" placeholder="State" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Postal Code</label>
                                <input type="text" id="postalCode" placeholder="Postal Code" required>
                            </div>
                            <div class="form-group">
                                <label>Country</label>
                                <input type="text" id="country" placeholder="Country" value="India" required>
                            </div>
                        </div>
                    </div>

                    <!-- Shipping Method -->
                    <div class="form-section">
                        <h2>Shipping Method</h2>
                        <div class="form-group">
                            <label>
                                <input type="radio" name="shipping" value="standard" checked> Standard Shipping - Free (5-7 days)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="radio" name="shipping" value="express"> Express Shipping - ‚Çπ99 (2-3 days)
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="radio" name="shipping" value="overnight"> Overnight Shipping - ‚Çπ299 (1 day)
                            </label>
                        </div>
                    </div>

                    <div class="checkout-buttons">
                        <button class="place-order-btn" onclick="proceedToPayment()">Proceed to Payment</button>
                        <button class="cancel-checkout-btn" onclick="closeCheckout()">Cancel Order</button>
                    </div>
                </div>

                <!-- Order Summary -->
                <div class="checkout-summary">
                    <div class="summary-header">Order Summary</div>
                    <div class="summary-items" id="checkoutItems"></div>
                    <div class="summary-divider"></div>
                    <div class="summary-total">
                        <span>Subtotal:</span>
                        <span id="subtotalCheckout">‚Çπ0.00</span>
                    </div>
                    <div class="summary-total" style="border-bottom: 1px solid #ddd; padding-bottom: 1rem; margin-bottom: 1rem; font-size: 0.9rem; color: #666;">
                        <span>Shipping:</span>
                        <span id="shippingCost">Free</span>
                    </div>
                    <div class="summary-total" style="color: #ff6b35; font-size: 1.2rem;">
                        <span>Total:</span>
                        <span id="totalCheckout">‚Çπ0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Page -->
    <div class="payment-page" id="paymentPage">
        <div class="payment-container">
            <div class="payment-header">
                <h1>Payment Details</h1>
                <button onclick="closePayment()">&times;</button>
            </div>

            <div class="payment-summary" id="paymentSummary">
                <div class="payment-summary-row">
                    <span>Order Total:</span>
                    <span id="paymentTotal">‚Çπ0.00</span>
                </div>
            </div>

            <div class="payment-tabs">
                <div class="payment-tab active" onclick="switchPaymentTab('card')">üí≥ Card</div>
                <div class="payment-tab" onclick="switchPaymentTab('upi')">üì± UPI</div>
                <div class="payment-tab" onclick="switchPaymentTab('netbanking')">üè¶ Net Banking</div>
            </div>

            <!-- Card Payment -->
            <div id="cardPayment" class="payment-form" style="display: block;">
                <div class="form-group">
                    <label>Cardholder Name</label>
                    <input type="text" id="cardName" placeholder="Name on card" required>
                </div>
                <div class="form-group">
                    <label>Card Number</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                </div>
                <div class="card-row">
                    <div class="form-group">
                        <label>Expiry Date</label>
                        <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5" required>
                    </div>
                    <div class="form-group">
                        <label>CVV</label>
                        <input type="text" id="cvv" placeholder="123" maxlength="4" required>
                    </div>
                </div>
                <button class="pay-button" onclick="processPayment('card')">Pay Now</button>
            </div>

            <!-- UPI Payment -->
            <div id="upiPayment" class="payment-form" style="display: none;">
                <div class="form-group">
                    <label>UPI ID</label>
                    <input type="text" id="upiId" placeholder="yourname@bank" required>
                </div>
                <button class="pay-button" onclick="processPayment('upi')">Pay with UPI</button>
            </div>

            <!-- Net Banking -->
            <div id="netbankingPayment" class="payment-form" style="display: none;">
                <div class="form-group">
                    <label>Select Bank</label>
                    <select id="bankSelect" required>
                        <option value="">Choose your bank</option>
                        <option value="sbi">State Bank of India (SBI)</option>
                        <option value="hdfc">HDFC Bank</option>
                        <option value="icici">ICICI Bank</option>
                        <option value="axis">Axis Bank</option>
                        <option value="boi">Bank of India</option>
                        <option value="bob">Bank of Baroda</option>
                    </select>
                </div>
                <button class="pay-button" onclick="processPayment('netbanking')">Proceed to Bank</button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <div class="breadcrumb">
            <a href="index.html">Home</a> / <a href="shop.html">Products</a> / <span id="breadcrumbProduct">Product</span>
        </div>

        <div class="product-detail">
            <div class="product-image-container" id="productImage">üíä</div>
            <div class="product-info-section">
                <h1 class="product-name" id="productName">Product Name</h1>
                <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (847 reviews)</div>

                <div class="price-section">
                    <div class="price" id="productPrice">‚Çπ0.00</div>
                    <div class="shipping-info">üöö Free Shipping on this item</div>
                    <div class="stock-status">‚úì In Stock</div>
                </div>

                <div class="product-specs">
                    <h3>Product Specifications</h3>
                    <ul class="specs-list" id="specsList">
                        <li>Loading...</li>
                    </ul>
                </div>

                <div class="action-buttons">
                    <div class="quantity-selector" onclick="event.stopPropagation()">
                        <button class="qty-btn" onclick="changeProductQty(-1)">‚àí</button>
                        <input type="number" class="qty-input" id="qtyInput" value="1" min="1" readonly>
                        <button class="qty-btn" onclick="changeProductQty(1)">+</button>
                    </div>
                    <button class="add-to-cart-btn" onclick="addToCart()">Add to Cart</button>
                    <button class="wishlist-btn" id="wishlistBtn" onclick="toggleWishlistProduct()">‚ù§Ô∏è Wishlist</button>
                </div>

                <div class="why-choose">
                    <h3>Why Choose This Product?</h3>
                    <ul class="benefits-list">
                        <li>100% Authentic & Original</li>
                        <li>GMP & WHO Certified</li>
                        <li>Money-back Guarantee</li>
                        <li>Fast & Free Delivery</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="description-section">
            <h2>Product Description</h2>
            <p id="productDesc">Loading product details...</p>
            <h3 style="color: #0066cc; margin: 2rem 0 1rem 0; font-size: 1.2rem;">Key Benefits</h3>
            <ul class="benefits-list">
                <li>Supports overall health and wellness</li>
                <li>Made with premium quality ingredients</li>
                <li>Clinically tested and proven effective</li>
                <li>Suitable for all age groups</li>
                <li>No harmful side effects</li>
            </ul>
        </div>

        <div class="related-products">
            <h2>Related Products</h2>
            <div class="related-grid" id="relatedProducts"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="index.html">Home</a>
            <a href="shop.html">Shop</a>
            <a href="#about">About Us</a>
            <a href="#contact">Contact Us</a>
            <a href="#privacy">Privacy Policy</a>
        </div>
        <p>&copy; 2024 Nadeleine Pharmaceuticals. All Rights Reserved.</p>
    </footer>

    <script>
        // Product Database
        const allProducts = {
            'astesol-d3mg': {
                name: 'Astesol D3¬ÆMG ‚Äì The Absolute Magnesium Solution',
                price: 279.04,
                emoji: 'üíä',
                specs: ['60 capsules per bottle', 'Pure Magnesium (500mg per capsule)', 'Vitamin D3 (1000 IU)', '9 months shelf life'],
                desc: 'Astesol D3¬ÆMG is a premium magnesium supplement combined with Vitamin D3 for enhanced absorption and effectiveness. Magnesium is essential for muscle function, bone health, and overall wellness. This scientifically formulated product helps maintain optimal magnesium levels in your body.'
            },
            'onvit-lc': {
                name: 'ONVIT LC ‚Äì Advanced Mitochondrial Energizer & Antioxidant',
                price: 589.52,
                emoji: 'üíâ',
                specs: ['30 capsules per pack', 'L-Carnitine (500mg)', 'Coenzyme Q10 (100mg)', 'Alpha Lipoic Acid (100mg)'],
                desc: 'ONVIT LC is an advanced formula designed to boost cellular energy and support cardiovascular health. The combination of L-Carnitine, CoQ10, and Alpha Lipoic Acid works synergistically to provide antioxidant protection and enhance mitochondrial function.'
            },
            'astiumd3-uc': {
                name: 'AstiumD3-UC ‚Äì Ultimate Bone & Joint Care Formula',
                price: 647.61,
                emoji: 'ü©π',
                specs: ['30 tablets per pack', 'Calcium (500mg)', 'Vitamin D3 (1000 IU)', 'Boron & Magnesium blend'],
                desc: 'AstiumD3-UC is scientifically formulated to support bone density and joint health. With a complete mineral profile including calcium, magnesium, and boron, along with Vitamin D3, this product ensures optimal skeletal health and flexibility.'
            },
            'riglobin-xt': {
                name: 'Riglobin-XT ‚Äì Iron, Folic Acid & Vitamin B12 Supplement',
                price: 249.00,
                emoji: 'üåø',
                specs: ['30 tablets per pack', 'Iron (20mg)', 'Folic Acid (400mcg)', 'Vitamin B12 (1000mcg)'],
                desc: 'Riglobin-XT is formulated to combat iron deficiency anemia and boost energy levels. The combination of iron, folic acid, and B12 promotes healthy red blood cell formation and improves oxygen transport throughout the body.'
            },
            'astium-d3': {
                name: 'Astium-D3 ‚Äì Coral Calcium with Vitamin D‚ÇÉ',
                price: 329.00,
                emoji: 'ü¶¥',
                specs: ['30 tablets per pack', 'Coral Calcium (600mg)', 'Vitamin D3 (1000 IU)', 'Magnesium (100mg)'],
                desc: 'Astium-D3 combines the goodness of coral calcium with Vitamin D3 for superior calcium absorption. Perfect for maintaining bone health, preventing osteoporosis, and ensuring overall skeletal strength.'
            },
            'onvit-4g': {
                name: 'Onvit-4G Softgel ‚Äì Energy, Immunity & Vitality Formula',
                price: 499.00,
                emoji: 'üß¨',
                specs: ['30 softgels per pack', 'Multi-Vitamin blend', 'Immunity boosters', 'Energy supplement complex'],
                desc: 'Onvit-4G is a comprehensive vitamin and mineral supplement designed to boost energy, strengthen immunity, and improve overall vitality. With a balanced blend of essential nutrients, it supports daily wellness.'
            },
            'coldnic-syrup': {
                name: 'Coldnic Syrup ‚Äì Cold & Cough Relief (60ml)',
                price: 149.99,
                emoji: 'üß¥',
                specs: ['60ml bottle', 'Fast-acting formula', 'For cold & cough relief', 'Pleasant honey flavor'],
                desc: 'Coldnic Syrup provides quick relief from cold, cough, and congestion. With its fast-acting formula and pleasant taste, it helps clear airways and reduces cough duration naturally.'
            },
            'claventin-625': {
                name: 'Claventin 625 ‚Äì Antibiotic with Probiotic Support',
                price: 399.00,
                emoji: 'üí™',
                specs: ['10 tablets per pack', 'Amoxicillin 500mg', 'Clavulanic Acid 125mg', 'With Probiotic Support'],
                desc: 'Claventin 625 is an effective antibiotic combination with integrated probiotic support to maintain gut health. It treats bacterial infections while protecting beneficial bacteria in your digestive system.'
            },
            'astesol-d3-syrup': {
                name: 'Astesol D3 Syrup ‚Äì Vitamin D for Kids',
                price: 299.00,
                emoji: 'üß¥',
                specs: ['60ml bottle', 'Child-safe formula', 'Pleasant taste', 'Vitamin D3 enriched'],
                desc: 'Astesol D3 Syrup is specially formulated for children to ensure proper bone development and calcium absorption. With a pleasant taste, kids love taking this essential vitamin D supplement.'
            },
            'astesol-d3-drops': {
                name: 'Astesol D3 Drops ‚Äì Liquid Vitamin D',
                price: 189.00,
                emoji: 'üíß',
                specs: ['30ml bottle', 'Easy to administer', 'Vitamin D3 (1000 IU per drop)', 'For infants & children'],
                desc: 'Astesol D3 Drops provides liquid Vitamin D3 ideal for infants and young children. The dropper bottle makes precise dosing easy, ensuring your baby gets the right amount of this crucial nutrient.'
            },
            'onvit-syrup': {
                name: 'Onvit Syrup ‚Äì L-Lysine & Multivitamin',
                price: 349.00,
                emoji: 'üß¥',
                specs: ['200ml bottle', 'L-Lysine (500mg per 5ml)', 'Multi-vitamin blend', 'Immune support'],
                desc: 'Onvit Syrup combines L-Lysine with essential vitamins to support immune function and overall health. The amino acid L-Lysine aids in protein synthesis and immune response.'
            },
            'astesol-d-60k': {
                name: 'Astesol D 60K ‚Äì High Potency Vitamin D',
                price: 379.00,
                emoji: 'üíä',
                specs: ['30 tablets per pack', 'Vitamin D3 60,000 IU', 'Once weekly dosage', 'High potency formula'],
                desc: 'Astesol D 60K provides high-potency Vitamin D3 in a convenient once-weekly tablet format. Ideal for individuals with vitamin D deficiency or those requiring strong supplementation.'
            }
        };

        // State Management
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        let currentProductId = null;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            const params = new URLSearchParams(window.location.search);
            currentProductId = params.get('id');
            
            if (currentProductId && allProducts[currentProductId]) {
                loadProduct();
                loadRelatedProducts();
            }
            
            updateCartUI();
            updateWishlistUI();
            updateUserUI();
            
            // Add event listeners for shipping method changes
            const shippingRadios = document.querySelectorAll('input[name="shipping"]');
            shippingRadios.forEach(radio => {
                radio.addEventListener('change', updateCheckoutSummary);
            });
            
            // Format card number input
            document.getElementById('cardNumber').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s/g, '');
                let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                e.target.value = formattedValue;
            });
            
            // Format expiry date input
            document.getElementById('expiryDate').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
            });
            
            // Allow only numbers in CVV
            document.getElementById('cvv').addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        });

        function loadProduct() {
            const product = allProducts[currentProductId];
            
            document.getElementById('breadcrumbProduct').textContent = product.name;
            document.getElementById('productImage').textContent = product.emoji;
            document.getElementById('productName').textContent = product.name;
            document.getElementById('productPrice').textContent = '‚Çπ' + product.price.toFixed(2);
            document.getElementById('productDesc').textContent = product.desc;
            
            const specsList = document.getElementById('specsList');
            specsList.innerHTML = product.specs.map(spec => `<li>${spec}</li>`).join('');
            
            updateWishlistButton();
        }

        function loadRelatedProducts() {
            const related = Object.entries(allProducts)
                .filter(([id]) => id !== currentProductId)
                .slice(0, 4);
            
            const container = document.getElementById('relatedProducts');
            container.innerHTML = related.map(([id, product]) => `
                <div class="related-card" onclick="goToProduct('${id}')">
                    <div class="related-card-image">${product.emoji}</div>
                    <div class="related-card-name">${product.name}</div>
                    <div class="related-card-price">‚Çπ${product.price.toFixed(2)}</div>
                </div>
            `).join('');
        }

        function changeProductQty(change) {
            const qtyInput = document.getElementById('qtyInput');
            const newQty = Math.max(1, parseInt(qtyInput.value) + change);
            qtyInput.value = newQty;
        }

        function addToCart() {
            if (!currentProductId) return;
            
            const qtyInput = document.getElementById('qtyInput');
            const qty = parseInt(qtyInput.value) || 1;
            
            const product = allProducts[currentProductId];
            const existingItem = cart.find(item => item.id === currentProductId);
            
            if (existingItem) {
                existingItem.quantity += qty;
            } else {
                cart.push({
                    id: currentProductId,
                    name: product.name,
                    price: product.price,
                    emoji: product.emoji,
                    quantity: qty
                });
            }
            
            qtyInput.value = 1;
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
        }

        function updateCartQty(productId, change) {
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.quantity = Math.max(1, item.quantity + change);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartUI();
            }
        }

        function updateCartUI() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const countBadge = document.getElementById('cartCount');
            countBadge.textContent = count;
            countBadge.style.display = count > 0 ? 'block' : 'none';
            
            const cartItems = document.getElementById('cartItems');
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-message">Your cart is empty</div>';
                document.getElementById('cartTotal').textContent = '‚Çπ0.00';
            } else {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-image">${item.emoji}</div>
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <div class="cart-item-price">‚Çπ${item.price.toFixed(2)}</div>
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                                <div class="quantity-selector" style="margin-bottom: 0;">
                                    <button class="qty-btn" onclick="updateCartQty('${item.id}', -1)">‚àí</button>
                                    <input type="number" class="qty-input" value="${item.quantity}" readonly>
                                    <button class="qty-btn" onclick="updateCartQty('${item.id}', 1)">+</button>
                                </div>
                                <button class="remove-btn" onclick="removeFromCart('${item.id}')">Remove</button>
                            </div>
                        </div>
                    </div>
                `).join('');
                document.getElementById('cartTotal').textContent = '‚Çπ' + total.toFixed(2);
            }
        }

        function toggleCart() {
            document.getElementById('cartSidebar').classList.toggle('active');
        }

        function checkout() {
            if (!currentUser) {
                alert('Please login first');
                toggleCart();
                goToLogin();
                return;
            }
            if (cart.length === 0) {
                alert('Your cart is empty');
                return;
            }
            toggleCart();
            openCheckout();
        }

        function openCheckout() {
            // Pre-fill user information if logged in
            if (currentUser) {
                document.getElementById('fullName').value = currentUser.name;
                document.getElementById('emailAddr').value = currentUser.email;
            }
            
            // Update order summary
            updateCheckoutSummary();
            document.getElementById('checkoutPage').classList.add('active');
        }

        function closeCheckout() {
            document.getElementById('checkoutPage').classList.remove('active');
        }

        function updateCheckoutSummary() {
            const checkoutItems = document.getElementById('checkoutItems');
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            checkoutItems.innerHTML = cart.map(item => `
                <div class="summary-item">
                    <span class="summary-item-name">${item.name} x${item.quantity}</span>
                    <span class="summary-item-price">‚Çπ${(item.price * item.quantity).toFixed(2)}</span>
                </div>
            `).join('');
            
            // Calculate shipping
            const shippingRadios = document.querySelectorAll('input[name="shipping"]');
            let shippingCost = 0;
            let shippingLabel = 'Free';
            shippingRadios.forEach(radio => {
                if (radio.checked) {
                    if (radio.value === 'express') {
                        shippingCost = 99;
                        shippingLabel = '‚Çπ99';
                    } else if (radio.value === 'overnight') {
                        shippingCost = 299;
                        shippingLabel = '‚Çπ299';
                    }
                }
            });
            
            document.getElementById('subtotalCheckout').textContent = '‚Çπ' + subtotal.toFixed(2);
            document.getElementById('shippingCost').textContent = shippingLabel;
            const total = subtotal + shippingCost;
            document.getElementById('totalCheckout').textContent = '‚Çπ' + total.toFixed(2);
        }

        function proceedToPayment() {
            // Validate delivery address
            const fullName = document.getElementById('fullName').value.trim();
            const emailAddr = document.getElementById('emailAddr').value.trim();
            const phoneNum = document.getElementById('phoneNum').value.trim();
            const street = document.getElementById('street').value.trim();
            const city = document.getElementById('city').value.trim();
            const state = document.getElementById('state').value.trim();
            const postalCode = document.getElementById('postalCode').value.trim();
            
            if (!fullName || !emailAddr || !phoneNum || !street || !city || !state || !postalCode) {
                alert('Please fill in all delivery address fields');
                return;
            }
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(emailAddr)) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Validate phone
            const phoneRegex = /^[0-9]{10}$/;
            if (!phoneRegex.test(phoneNum.replace(/\D/g, ''))) {
                alert('Please enter a valid 10-digit phone number');
                return;
            }
            
            // Store delivery details
            localStorage.setItem('deliveryDetails', JSON.stringify({
                fullName, emailAddr, phoneNum, street, city, state, postalCode,
                country: document.getElementById('country').value,
                shipping: document.querySelector('input[name="shipping"]:checked').value
            }));
            
            closeCheckout();
            openPayment();
        }

        function openPayment() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let shippingCost = 0;
            
            const shippingRadios = document.querySelectorAll('input[name="shipping"]');
            shippingRadios.forEach(radio => {
                if (radio.checked) {
                    if (radio.value === 'express') shippingCost = 99;
                    else if (radio.value === 'overnight') shippingCost = 299;
                }
            });
            
            const total = subtotal + shippingCost;
            document.getElementById('paymentTotal').textContent = '‚Çπ' + total.toFixed(2);
            document.getElementById('paymentPage').classList.add('active');
        }

        function closePayment() {
            document.getElementById('paymentPage').classList.remove('active');
        }

        function switchPaymentTab(tab) {
            // Hide all payment forms
            document.getElementById('cardPayment').style.display = 'none';
            document.getElementById('upiPayment').style.display = 'none';
            document.getElementById('netbankingPayment').style.display = 'none';
            
            // Update tab styles
            document.querySelectorAll('.payment-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show selected form
            if (tab === 'card') {
                document.getElementById('cardPayment').style.display = 'flex';
            } else if (tab === 'upi') {
                document.getElementById('upiPayment').style.display = 'flex';
            } else if (tab === 'netbanking') {
                document.getElementById('netbankingPayment').style.display = 'flex';
            }
        }

        function processPayment(method) {
            let isValid = false;
            
            if (method === 'card') {
                const cardName = document.getElementById('cardName').value.trim();
                const cardNumber = document.getElementById('cardNumber').value.trim().replace(/\s/g, '');
                const expiryDate = document.getElementById('expiryDate').value.trim();
                const cvv = document.getElementById('cvv').value.trim();
                
                // Validate card details
                if (!cardName) {
                    alert('Please enter cardholder name');
                    return;
                }
                if (cardNumber.length !== 16 || !/^\d+$/.test(cardNumber)) {
                    alert('Please enter a valid 16-digit card number');
                    return;
                }
                if (!/^\d{2}\/\d{2}$/.test(expiryDate)) {
                    alert('Please enter expiry date in MM/YY format');
                    return;
                }
                if (cvv.length < 3 || cvv.length > 4 || !/^\d+$/.test(cvv)) {
                    alert('Please enter a valid CVV');
                    return;
                }
                isValid = true;
            } else if (method === 'upi') {
                const upiId = document.getElementById('upiId').value.trim();
                if (!upiId || !upiId.includes('@')) {
                    alert('Please enter a valid UPI ID (format: username@bank)');
                    return;
                }
                isValid = true;
            } else if (method === 'netbanking') {
                const bankSelect = document.getElementById('bankSelect').value;
                if (!bankSelect) {
                    alert('Please select a bank');
                    return;
                }
                isValid = true;
            }
            
            if (isValid) {
                completeOrder(method);
            }
        }

        function completeOrder(method) {
            // Store order details
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            let shippingCost = 0;
            
            const shippingRadios = document.querySelectorAll('input[name="shipping"]');
            shippingRadios.forEach(radio => {
                if (radio.checked) {
                    if (radio.value === 'express') shippingCost = 99;
                    else if (radio.value === 'overnight') shippingCost = 299;
                }
            });
            
            const orderNumber = 'ORD-' + Date.now();
            const order = {
                orderNumber,
                items: cart,
                subtotal,
                shipping: shippingCost,
                total: subtotal + shippingCost,
                paymentMethod: method,
                date: new Date().toLocaleString(),
                deliveryDetails: JSON.parse(localStorage.getItem('deliveryDetails'))
            };
            
            // Save order to localStorage
            let orders = JSON.parse(localStorage.getItem('orders')) || [];
            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            
            // Clear cart
            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            
            // Show success message and close payment
            closePayment();
            alert(`‚úì Payment Successful!\n\nOrder Number: ${orderNumber}\nTotal Amount: ‚Çπ${order.total.toFixed(2)}\n\nThank you for your purchase!\nYour order will be delivered to the address provided.`);
        }

        function toggleWishlistProduct() {
            if (!currentProductId) return;
            
            if (wishlist.includes(currentProductId)) {
                wishlist = wishlist.filter(id => id !== currentProductId);
            } else {
                wishlist.push(currentProductId);
            }
            
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
            updateWishlistUI();
            updateWishlistButton();
        }

        function updateWishlistButton() {
            const btn = document.getElementById('wishlistBtn');
            if (wishlist.includes(currentProductId)) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        }

        function updateWishlistUI() {
            const countBadge = document.getElementById('wishlistCount');
            countBadge.textContent = wishlist.length;
            countBadge.style.display = wishlist.length > 0 ? 'block' : 'none';
            
            const wishlistItems = document.getElementById('wishlistItems');
            if (wishlist.length === 0) {
                wishlistItems.innerHTML = '<div class="empty-message">Your wishlist is empty</div>';
            } else {
                const wishlistProducts = wishlist.map(id => ({id, ...allProducts[id]}));
                wishlistItems.innerHTML = wishlistProducts.map(product => `
                    <div class="cart-item">
                        <div class="cart-item-image">${product.emoji}</div>
                        <div class="cart-item-info">
                            <h4>${product.name}</h4>
                            <div class="cart-item-price">‚Çπ${product.price.toFixed(2)}</div>
                            <button class="quick-add-btn" style="background: #0066cc; color: white; border: none; padding: 0.3rem 0.6rem; border-radius: 3px; cursor: pointer; font-size: 0.8rem;" onclick="addToWishlistCart('${product.id}')">Add to Cart</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function addToWishlistCart(productId) {
            const product = allProducts[productId];
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    id: productId,
                    name: product.name,
                    price: product.price,
                    emoji: product.emoji,
                    quantity: 1
                });
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartUI();
            alert(product.name + ' added to cart!');
        }

        function toggleWishlist() {
            document.getElementById('wishlistSidebar').classList.toggle('active');
        }

        function goToLogin(e) {
            if (e) e.preventDefault();
            closeRegisterModal();
            document.getElementById('loginModal').classList.add('active');
            toggleUserMenu();
        }

        function goToRegister(e) {
            if (e) e.preventDefault();
            closeLoginModal();
            document.getElementById('registerModal').classList.add('active');
            toggleUserMenu();
        }

        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                alert('Please fill all fields');
                return;
            }
            
            currentUser = { email, name: email.split('@')[0] };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserUI();
            closeLoginModal();
            alert('Logged in successfully!');
        }

        function handleRegister() {
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const phone = document.getElementById('registerPhone').value;
            
            if (!name || !email || !password || !phone) {
                alert('Please fill all fields');
                return;
            }
            
            currentUser = { name, email, phone };
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            updateUserUI();
            closeRegisterModal();
            alert('Registered successfully!');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUserUI();
            toggleUserMenu();
            alert('Logged out successfully');
        }

        function updateUserUI() {
            const userDisplay = document.getElementById('userDisplay');
            const logoutBtn = document.getElementById('logoutBtn');
            
            if (currentUser) {
                userDisplay.innerHTML = `<strong>${currentUser.name}</strong>`;
                logoutBtn.style.display = 'block';
            } else {
                userDisplay.innerHTML = '';
                logoutBtn.style.display = 'none';
            }
        }

        function toggleUserMenu() {
            document.getElementById('userMenu').classList.toggle('active');
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        function closeRegisterModal() {
            document.getElementById('registerModal').classList.remove('active');
            document.getElementById('registerName').value = '';
            document.getElementById('registerEmail').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerPhone').value = '';
        }

        function switchToLogin(e) {
            e.preventDefault();
            closeRegisterModal();
            goToLogin();
        }

        function switchToRegister(e) {
            e.preventDefault();
            closeLoginModal();
            goToRegister();
        }

        function goToProduct(productId) {
            window.location.href = `product.html?id=${productId}`;
        }

        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            if (!e.target.closest('.user-menu')) {
                userMenu.classList.remove('active');
            }
        });
    </script>
</body>
</html>
